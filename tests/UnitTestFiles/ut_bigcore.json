{
  "cpu": "spr",
  "AccessMethod":  "/dev/peci-wire",
  "Version": "release",
  "ServiceName": "crashdump",
  "PECIHeaders": {
    "Ping": ["Target"],
    "GetCPUID": ["Target"],
    "RdPkgConfig": ["Target", "Index", "Parameter", "ReadLen"],
    "RdEndpointConfigPCILocal": ["Target", "Seg", "Bus", "Dev", "Func", "Reg", "ReadLen"],
    "RdEndpointConfigMMIO": ["Target", "Seg", "Bus", "Dev", "Func", "Bar", "AType", "Reg", "ReadLen"],
    "RdIAMSR": ["Target", "Thread", "Address"]
  },
  "DefaultState": "Enable",
  "UseSections": true,
  "MaxTimeInSec": 700,
  "Sections": [
    {
      "BigCore" : {
        "RecordEnable": true,
        "RecordType": "0x04",
        "ProductType": "0x1c",
        "Revision": "0x01",
        "OutputPath": "crash_data/PROCESSORS/cpu%d/big_core",
        "MaxWaitSec" : 120,
        "WaitOnIntIerr" : true,
        "WaitOnExtIerr" : true,
        "MaxCollectionSec" : 150,
        "MaxCollectionCores" : 64,
        "UseRegEnable" : false,
        "PreReq": {
          "PECICmds": [
            {
              "CrashDump_Discovery" : [
                {
                  "Params" : ["Target", 0, 0, 0, 0, 1],
                  "InternalVar": "IsCrashdumpEnable",
                  "Comment" : "Check and return if big core related crashdump is enabled"
                }, {
                  "Params" : ["Target", 1, 0, 0, 0, 2],
                  "InternalVar": "NumCrashdumpAgents",
                  "Comment" : "Get number of supported crash agents"
                }, {
                  "Params" : ["Target", 2, 0, 0, 0, 8],
                  "InternalVar": "CrashdumpGUID",
                  "Comment" : "Get the unique ID (GUID)"
                }, {
                  "Params" : ["Target", 2, 1, 0, 0, 8],
                  "InternalVar": "CrashdumpPayloadSize",
                  "Comment" : "Get the payload size"
                }
              ]
            }
          ]
        },
        "PECICmds" : [
          {
            "LogBigCore" : [
              {
                "Params" : ["IsCrashdumpEnable", "NumCrashdumpAgents", "CrashdumpGUID", "CrashdumpPayloadSize"],
                "Comment" : "Iterate to collect crash data for big core for a particular core"
              }
            ]
          }
        ],
        "Decode" : [
          {
            "version" : ["0x4029001", "0x4029002"],
            "header_info": ["reg_name", "reg_size", "isLogged"],
            "reg_list": [
              ["crashlog_version", 4, false],
              ["size", 4, false],
              ["art_ctc_timestamp", 8, false],
              ["patch_revid", 4, false],
              ["shutdown_reason", 4, false],
              ["whoami", 4, false],
              ["miscellaneous_status", 4, false],
              ["CR0", 4, false],
              ["CR4", 4, false],
              ["CR2", 8, false],
              ["CR3", 8, false],
              ["EFER", 4, false],
              ["CS_SELECTOR", 2, false],
              ["SS_SELECTOR", 2, false],
              ["DS_SELECTOR", 2, false],
              ["ES_SELECTOR", 2, false],
              ["FS_SELECTOR", 2, false],
              ["GS_SELECTOR", 2, false],
              ["EFLAGS", 8, false],
              ["LIP", 8, false],
              ["RAX", 8, false],
              ["RCX", 8, false],
              ["RDX", 8, false],
              ["RBX", 8, false],
              ["RSP", 8, false],
              ["RBP", 8, false],
              ["RSI", 8, false],
              ["RDI", 8, false],
              ["R8", 8, false],
              ["R9", 8, false],
              ["R10", 8, false],
              ["R11", 8, false],
              ["R12", 8, false],
              ["R13", 8, false],
              ["R14", 8, false],
              ["R15", 8, false],
              ["ifu_cr_mc0_ctl", 8, true],
              ["ifu_cr_mc0_status", 8, true],
              ["ifu_cr_mc0_addr", 8, true],
              ["ifu_cr_mc0_misc", 8, true],
              ["dcu_cr_mc1_ctl", 8, true],
              ["dcu_cr_mc1_status", 8, true],
              ["dcu_cr_mc1_addr", 8, true],
              ["dcu_cr_mc1_misc", 8, true],
              ["dtlb_cr_mc2_ctl", 8, true],
              ["dtlb_cr_mc2_status", 8, true],
              ["dtlb_cr_mc2_addr", 8, true],
              ["dtlb_cr_mc2_misc", 8, true],
              ["ml2_cr_mc3_ctl", 8, true],
              ["ml2_cr_mc3_status", 8, true],
              ["ml2_cr_mc3_addr", 8, true],
              ["ml2_cr_mc3_misc", 8, true],
              ["PMH_CR_MTRRVARBASE0", 8, false],
              ["PMH_CR_MTRRVARMASK0", 8, false],
              ["PMH_CR_MTRRVARBASE1", 8, false],
              ["PMH_CR_MTRRVARMASK1", 8, false],
              ["PMH_CR_MTRRVARBASE2", 8, false],
              ["PMH_CR_MTRRVARMASK2", 8, false],
              ["PMH_CR_MTRRVARBASE3", 8, false],
              ["PMH_CR_MTRRVARMASK3", 8, false],
              ["PMH_CR_MTRRVARBASE4", 8, false],
              ["PMH_CR_MTRRVARMASK4", 8, false],
              ["PMH_CR_MTRRVARBASE5", 8, false],
              ["PMH_CR_MTRRVARMASK5", 8, false],
              ["PMH_CR_MTRRVARBASE6", 8, false],
              ["PMH_CR_MTRRVARMASK6", 8, false],
              ["PMH_CR_MTRRVARBASE7", 8, false],
              ["PMH_CR_MTRRVARMASK7", 8, false],
              ["PMH_CR_MTRRFIX64K", 8, false],
              ["PMH_CR_MTRRFIX16K8", 8, false],
              ["PMH_CR_MTRRFIX16KA", 8, false],
              ["PMH_CR_MTRRVARBASE8", 8, false],
              ["PMH_CR_MTRRVARMASK8", 8, false],
              ["PMH_CR_MTRRFIX4KC0", 8, false],
              ["PMH_CR_MTRRFIX4KC8", 8, false],
              ["PMH_CR_MTRRFIX4KD0", 8, false],
              ["PMH_CR_MTRRFIX4KD8", 8, false],
              ["PMH_CR_MTRRFIX4KE0", 8, false],
              ["PMH_CR_MTRRFIX4KE8", 8, false],
              ["PMH_CR_MTRRFIX4KF0", 8, false],
              ["PMH_CR_MTRRFIX4KF8", 8, false],
              ["PMH_CR_MTRRDEFAULT", 8, false],
              ["PMH_CR_MTRRVARBASE9", 8, false],
              ["PMH_CR_MTRRVARMASK9", 8, false],
              ["CORE_CR_APIC_BASE", 8, false],
              ["CORE_CR_EPTP", 8, false],
              ["CORE_CR_MISC_ENABLES", 8, false],
              ["SCP_CR_MCG_STATUS", 4, false],
              ["spare", 4, false],
              ["SCP_CR_TARGET_SLEEP_STATE", 4, false],
              ["DebugCTLMSR", 4, false],
              ["LBR_CTL", 8, false],
              ["LBR_DEPTH", 8, false],
              ["LER_FROM_IP", 8, false],
              ["LER_TO_IP", 8, false],
              ["LER_INFO", 8, false],
              ["LBR0_FROM", 8, false],
              ["LBR0_TO", 8, false],
              ["LBR0_INFO", 8, false],
              ["LBR1_FROM", 8, false],
              ["LBR1_TO", 8, false],
              ["LBR1_INFO", 8, false],
              ["LBR2_FROM", 8, false],
              ["LBR2_TO", 8, false],
              ["LBR2_INFO", 8, false],
              ["LBR3_FROM", 8, false],
              ["LBR3_TO", 8, false],
              ["LBR3_INFO", 8, false],
              ["LBR4_FROM", 8, false],
              ["LBR4_TO", 8, false],
              ["LBR4_INFO", 8, false],
              ["LBR5_FROM", 8, false],
              ["LBR5_TO", 8, false],
              ["LBR5_INFO", 8, false],
              ["LBR6_FROM", 8, false],
              ["LBR6_TO", 8, false],
              ["LBR6_INFO", 8, false],
              ["LBR7_FROM", 8, false],
              ["LBR7_TO", 8, false],
              ["LBR7_INFO", 8, false],
              ["LBR8_FROM", 8, false],
              ["LBR8_TO", 8, false],
              ["LBR8_INFO", 8, false],
              ["LBR9_FROM", 8, false],
              ["LBR9_TO", 8, false],
              ["LBR9_INFO", 8, false],
              ["LBR10_FROM", 8, false],
              ["LBR10_TO", 8, false],
              ["LBR10_INFO", 8, false],
              ["LBR11_FROM", 8, false],
              ["LBR11_TO", 8, false],
              ["LBR11_INFO", 8, false],
              ["LBR12_FROM", 8, false],
              ["LBR12_TO", 8, false],
              ["LBR12_INFO", 8, false],
              ["LBR13_FROM", 8, false],
              ["LBR13_TO", 8, false],
              ["LBR13_INFO", 8, false],
              ["LBR14_FROM", 8, false],
              ["LBR14_TO", 8, false],
              ["LBR14_INFO", 8, false],
              ["LBR15_FROM", 8, false],
              ["LBR15_TO", 8, false],
              ["LBR15_INFO", 8, false],
              ["LBR16_FROM", 8, false],
              ["LBR16_TO", 8, false],
              ["LBR16_INFO", 8, false],
              ["LBR17_FROM", 8, false],
              ["LBR17_TO", 8, false],
              ["LBR17_INFO", 8, false],
              ["LBR18_FROM", 8, false],
              ["LBR18_TO", 8, false],
              ["LBR18_INFO", 8, false],
              ["LBR19_FROM", 8, false],
              ["LBR19_TO", 8, false],
              ["LBR19_INFO", 8, false],
              ["LBR20_FROM", 8, false],
              ["LBR20_TO", 8, false],
              ["LBR20_INFO", 8, false],
              ["LBR21_FROM", 8, false],
              ["LBR21_TO", 8, false],
              ["LBR21_INFO", 8, false],
              ["LBR22_FROM", 8, false],
              ["LBR22_TO", 8, false],
              ["LBR22_INFO", 8, false],
              ["LBR23_FROM", 8, false],
              ["LBR23_TO", 8, false],
              ["LBR23_INFO", 8, false],
              ["LBR24_FROM", 8, false],
              ["LBR24_TO", 8, false],
              ["LBR24_INFO", 8, false],
              ["LBR25_FROM", 8, false],
              ["LBR25_TO", 8, false],
              ["LBR25_INFO", 8, false],
              ["LBR26_FROM", 8, false],
              ["LBR26_TO", 8, false],
              ["LBR26_INFO", 8, false],
              ["LBR27_FROM", 8, false],
              ["LBR27_TO", 8, false],
              ["LBR27_INFO", 8, false],
              ["LBR28_FROM", 8, false],
              ["LBR28_TO", 8, false],
              ["LBR28_INFO", 8, false],
              ["LBR29_FROM", 8, false],
              ["LBR29_TO", 8, false],
              ["LBR29_INFO", 8, false],
              ["LBR30_FROM", 8, false],
              ["LBR30_TO", 8, false],
              ["LBR30_INFO", 8, false],
              ["LBR31_FROM", 8, false],
              ["LBR31_TO", 8, false],
              ["LBR31_INFO", 8, false]
            ]
          },
          {
            "version" : ["0x4029003"],
            "header_info": ["reg_name", "reg_size", "isLogged"],
            "reg_list": [
              ["crashlog_version", 4, false],
              ["size", 4, false],
              ["art_ctc_timestamp", 8, false],
              ["patch_revid", 4, false],
              ["shutdown_reason", 4, false],
              ["whoami", 4, false],
              ["miscellaneous_status", 4, false],
              ["CR0", 4, false],
              ["CR4", 4, false],
              ["CR2", 8, false],
              ["CR3", 8, false],
              ["EFER", 4, false],
              ["CS_SELECTOR", 2, false],
              ["SS_SELECTOR", 2, false],
              ["DS_SELECTOR", 2, false],
              ["ES_SELECTOR", 2, false],
              ["FS_SELECTOR", 2, false],
              ["GS_SELECTOR", 2, false],
              ["EFLAGS", 8, false],
              ["LIP", 8, false],
              ["RAX", 8, false],
              ["RCX", 8, false],
              ["RDX", 8, false],
              ["RBX", 8, false],
              ["RSP", 8, false],
              ["RBP", 8, false],
              ["RSI", 8, false],
              ["RDI", 8, false],
              ["R8", 8, false],
              ["R9", 8, false],
              ["R10", 8, false],
              ["R11", 8, false],
              ["R12", 8, false],
              ["R13", 8, false],
              ["R14", 8, false],
              ["R15", 8, false],
              ["ifu_cr_mc0_ctl", 8, true],
              ["ifu_cr_mc0_status", 8, true],
              ["ifu_cr_mc0_addr", 8, true],
              ["ifu_cr_mc0_misc", 8, true],
              ["dcu_cr_mc1_ctl", 8, true],
              ["dcu_cr_mc1_status", 8, true],
              ["dcu_cr_mc1_addr", 8, true],
              ["dcu_cr_mc1_misc", 8, true],
              ["dtlb_cr_mc2_ctl", 8, true],
              ["dtlb_cr_mc2_status", 8, true],
              ["dtlb_cr_mc2_addr", 8, true],
              ["dtlb_cr_mc2_misc", 8, true],
              ["ml2_cr_mc3_ctl", 8, true],
              ["ml2_cr_mc3_status", 8, true],
              ["ml2_cr_mc3_addr", 8, true],
              ["ml2_cr_mc3_misc", 8, true],
              ["PMH_CR_MTRRVARBASE0", 8, false],
              ["PMH_CR_MTRRVARMASK0", 8, false],
              ["PMH_CR_MTRRVARBASE1", 8, false],
              ["PMH_CR_MTRRVARMASK1", 8, false],
              ["PMH_CR_MTRRVARBASE2", 8, false],
              ["PMH_CR_MTRRVARMASK2", 8, false],
              ["PMH_CR_MTRRVARBASE3", 8, false],
              ["PMH_CR_MTRRVARMASK3", 8, false],
              ["PMH_CR_MTRRVARBASE4", 8, false],
              ["PMH_CR_MTRRVARMASK4", 8, false],
              ["PMH_CR_MTRRVARBASE5", 8, false],
              ["PMH_CR_MTRRVARMASK5", 8, false],
              ["PMH_CR_MTRRVARBASE6", 8, false],
              ["PMH_CR_MTRRVARMASK6", 8, false],
              ["PMH_CR_MTRRVARBASE7", 8, false],
              ["PMH_CR_MTRRVARMASK7", 8, false],
              ["PMH_CR_MTRRFIX64K", 8, false],
              ["PMH_CR_MTRRFIX16K8", 8, false],
              ["PMH_CR_MTRRFIX16KA", 8, false],
              ["PMH_CR_MTRRVARBASE8", 8, false],
              ["PMH_CR_MTRRVARMASK8", 8, false],
              ["PMH_CR_MTRRFIX4KC0", 8, false],
              ["PMH_CR_MTRRFIX4KC8", 8, false],
              ["PMH_CR_MTRRFIX4KD0", 8, false],
              ["PMH_CR_MTRRFIX4KD8", 8, false],
              ["PMH_CR_MTRRFIX4KE0", 8, false],
              ["PMH_CR_MTRRFIX4KE8", 8, false],
              ["PMH_CR_MTRRFIX4KF0", 8, false],
              ["PMH_CR_MTRRFIX4KF8", 8, false],
              ["PMH_CR_MTRRDEFAULT", 8, false],
              ["PMH_CR_MTRRVARBASE9", 8, false],
              ["PMH_CR_MTRRVARMASK9", 8, false],
              ["CORE_CR_APIC_BASE", 8, false],
              ["CORE_CR_EPTP", 8, false],
              ["PMH_CR_SHARED_EPTP", 8, false],
              ["CORE_CR_MISC_ENABLES", 8, false],
              ["SCP_CR_MCG_STATUS", 4, false],
              ["spare", 4, false],
              ["SCP_CR_TARGET_SLEEP_STATE", 4, false],
              ["DebugCTLMSR", 4, false],
              ["LBR_CTL", 8, false],
              ["LBR_DEPTH", 8, false],
              ["LER_FROM_IP", 8, false],
              ["LER_TO_IP", 8, false],
              ["LER_INFO", 8, false],
              ["LBR0_FROM", 8, false],
              ["LBR0_TO", 8, false],
              ["LBR0_INFO", 8, false],
              ["LBR1_FROM", 8, false],
              ["LBR1_TO", 8, false],
              ["LBR1_INFO", 8, false],
              ["LBR2_FROM", 8, false],
              ["LBR2_TO", 8, false],
              ["LBR2_INFO", 8, false],
              ["LBR3_FROM", 8, false],
              ["LBR3_TO", 8, false],
              ["LBR3_INFO", 8, false],
              ["LBR4_FROM", 8, false],
              ["LBR4_TO", 8, false],
              ["LBR4_INFO", 8, false],
              ["LBR5_FROM", 8, false],
              ["LBR5_TO", 8, false],
              ["LBR5_INFO", 8, false],
              ["LBR6_FROM", 8, false],
              ["LBR6_TO", 8, false],
              ["LBR6_INFO", 8, false],
              ["LBR7_FROM", 8, false],
              ["LBR7_TO", 8, false],
              ["LBR7_INFO", 8, false],
              ["LBR8_FROM", 8, false],
              ["LBR8_TO", 8, false],
              ["LBR8_INFO", 8, false],
              ["LBR9_FROM", 8, false],
              ["LBR9_TO", 8, false],
              ["LBR9_INFO", 8, false],
              ["LBR10_FROM", 8, false],
              ["LBR10_TO", 8, false],
              ["LBR10_INFO", 8, false],
              ["LBR11_FROM", 8, false],
              ["LBR11_TO", 8, false],
              ["LBR11_INFO", 8, false],
              ["LBR12_FROM", 8, false],
              ["LBR12_TO", 8, false],
              ["LBR12_INFO", 8, false],
              ["LBR13_FROM", 8, false],
              ["LBR13_TO", 8, false],
              ["LBR13_INFO", 8, false],
              ["LBR14_FROM", 8, false],
              ["LBR14_TO", 8, false],
              ["LBR14_INFO", 8, false],
              ["LBR15_FROM", 8, false],
              ["LBR15_TO", 8, false],
              ["LBR15_INFO", 8, false],
              ["LBR16_FROM", 8, false],
              ["LBR16_TO", 8, false],
              ["LBR16_INFO", 8, false],
              ["LBR17_FROM", 8, false],
              ["LBR17_TO", 8, false],
              ["LBR17_INFO", 8, false],
              ["LBR18_FROM", 8, false],
              ["LBR18_TO", 8, false],
              ["LBR18_INFO", 8, false],
              ["LBR19_FROM", 8, false],
              ["LBR19_TO", 8, false],
              ["LBR19_INFO", 8, false],
              ["LBR20_FROM", 8, false],
              ["LBR20_TO", 8, false],
              ["LBR20_INFO", 8, false],
              ["LBR21_FROM", 8, false],
              ["LBR21_TO", 8, false],
              ["LBR21_INFO", 8, false],
              ["LBR22_FROM", 8, false],
              ["LBR22_TO", 8, false],
              ["LBR22_INFO", 8, false],
              ["LBR23_FROM", 8, false],
              ["LBR23_TO", 8, false],
              ["LBR23_INFO", 8, false],
              ["LBR24_FROM", 8, false],
              ["LBR24_TO", 8, false],
              ["LBR24_INFO", 8, false],
              ["LBR25_FROM", 8, false],
              ["LBR25_TO", 8, false],
              ["LBR25_INFO", 8, false],
              ["LBR26_FROM", 8, false],
              ["LBR26_TO", 8, false],
              ["LBR26_INFO", 8, false],
              ["LBR27_FROM", 8, false],
              ["LBR27_TO", 8, false],
              ["LBR27_INFO", 8, false],
              ["LBR28_FROM", 8, false],
              ["LBR28_TO", 8, false],
              ["LBR28_INFO", 8, false],
              ["LBR29_FROM", 8, false],
              ["LBR29_TO", 8, false],
              ["LBR29_INFO", 8, false],
              ["LBR30_FROM", 8, false],
              ["LBR30_TO", 8, false],
              ["LBR30_INFO", 8, false],
              ["LBR31_FROM", 8, false],
              ["LBR31_TO", 8, false],
              ["LBR31_INFO", 8, false]
            ]
          }
        ]
      }
    }
  ]
}
